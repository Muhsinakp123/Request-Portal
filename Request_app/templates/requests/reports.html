{% extends "master.html" %}
{% block title %}Reports{% endblock %}

{% block content %}
<div class="container py-4">

    <h2 class="mb-4">Resolved Requests Report</h2>

    <!-- Filters Form -->
    <form method="GET" class="row g-3 mb-4 p-3 border rounded bg-light">

        <div class="col-md-3">
            <label class="form-label">Category</label>
            <select name="category" class="form-select">
                <option value="all">All</option>
                <option value="software">Software</option>
                <option value="hardware">Hardware</option>
                <option value="network">Network</option>
                <option value="other">Other</option>
            </select>
        </div>

        <div class="col-md-3">
            <label class="form-label">Date Filter</label>
            <select name="filter" class="form-select">
                <option value="">All</option>
                <option value="daily">Today</option>
                <option value="weekly">This Week</option>
                <option value="monthly">This Month</option>
                <option value="yearly">This Year</option>
                <option value="custom">Custom Range</option>
            </select>
        </div>

        <div class="col-md-3">
            <label class="form-label">Start Date</label>
            <input type="date" name="start_date" class="form-control">
        </div>

        <div class="col-md-3">
            <label class="form-label">End Date</label>
            <input type="date" name="end_date" class="form-control">
        </div>

        <div class="col-md-12 text-end">
            <button class="btn btn-primary">Apply Filters</button>
        </div>
    </form>

    <!-- Data Table -->
    {% if requests %}
    <table class="table table-bordered table-striped align-middle">
        <thead class="table-dark">
            <tr>
                <th>No</th>
                <th>Ticket ID</th>
                <th>User</th>
                <th>Category</th>
                <th>Description</th>
                <th>Assigned To</th>
                <th>Resolved Date</th>
            </tr>
        </thead>
        <tbody>
            {% for r in requests %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ r.id }}</td>
                <td>{{ r.user.username }}</td>
                <td>{{ r.category|title }}</td>
                <td>{{ r.description }}</td>
                <td>{{ r.assigned_to.username }}</td>
                <td>{{ r.updated_at|date:"M d, Y H:i" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-muted text-center">No resolved request records found.</p>
    {% endif %}

</div>
{% endblock %}
